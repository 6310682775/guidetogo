{% extends "main/layout.html" %}

{% block body %}
<title>Home | GuideToGo</title>

{% load static %}

<style>
    .carousel-item img {
        object-fit: cover;
    }

    .carousel-caption h5 {
        font-size: 42px;
    }

    .dropdown-menu form {
        display: flow-root;
        justify-content: space-between;
        align-items: center;
        padding: 5px;
    }

    .dropdown-menu form label, select, input {
        margin: 5px;
        border-radius: 5px;
        color: #20247b;
    }

    .dropdown-center .d-button {
        background: #f58e2e;
        border-color: #f58e2e;
    }

    .dropdown-center .d-button:hover {
        background: #df812a;
        border-color: #df812a;
    }

    .card-img-top {
        width: 100%;
        height: 180px;
        overflow: hidden;
        object-fit: cover;
    }

    .avatar img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        overflow: hidden;
        object-fit: cover;
    }
</style>

<div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="https://images.unsplash.com/photo-1616047493036-0e1d5ab21dab?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80" 
                class="d-block w-100" alt="slide" height="600">
            <!-- <div class="carousel-caption d-none d-md-block">
                <h5>Bangkok</h5>
                <p>Thailand Capital</p>
            </div> -->
        </div>
        <div class="carousel-item">
            <img src="https://images.unsplash.com/photo-1576311510484-ab9fbdb2a47e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80" 
                class="d-block w-100" alt="slide" height="600">
            <!-- <div class="carousel-caption d-none d-md-block">
                <h5>Ayutthaya</h5>
                <p>Ancient City</p>
            </div> -->
        </div>
        <div class="carousel-item">
            <img src="https://images.unsplash.com/photo-1506665531195-3566af2b4dfa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80" 
                class="d-block w-100" alt="slide" height="600">
            <!-- <div class="carousel-caption d-none d-md-block">
                <h5>Phuket</h5>
                <p>Beautiful Beach</p>
            </div> -->
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>

<br>

<div class="container px-4 px-lg-5 mt-5">

    <h2 class="pt-3">All Tours</h2><br><br>
    <div class="dropdown-center">
        <button class="d-button btn btn-secondary dropdown-toggle w-100" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fa-solid fa-magnifying-glass"></i> Search Filters
        </button>
        <ul class="dropdown-menu">
          <li><form method="get">{{myFilter.form}}<button class="btn btn-secondary w-25" type="submit"><i class="fa-solid fa-magnifying-glass"></i></button></form></li>
        </ul>
      </div>
    <!-- <div class="row">
        <div class="col-5">
            <div class="my-filter card card-body">
                <form method="get">
                    {{myFilter.form}}
                <button class="btn btn-secondary w-100 mt-2" type="submit">
                    Search</button>
                </form>
            </div>
        </div>
    </div> -->
    <br>
    <div class="row gx-4 gx-lg-4 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-start mt-3">
        {% for t in all_tour %}
        <div class="col mb-5">
            <div class="card border-light h-100 shadow">
                <div class="card-img-body" style="transform: rotate(0);">
                    {% if t.img %}
                        <img class="card-img-top" src="{{ t.img.url}}" alt="..." />
                    {% endif %}
                    <!-- Tour details-->
                    <div class="card-body p-4">
                        <div class="text-start">
                            <!-- Tour name-->
                            <h5 class="fw-bolder text-truncate "><a href="{% url 'tour:view_tour' t.id %}" class="stretched-link" style="text-decoration: none; color: black;">{{ t.t_name }}</a></h5>
                            <!-- Tour reviews-->
                            <div class="d-flex justify-content-start small text-warning mb-2" style="font-size: 12px; letter-spacing: 2px;">
                                {% if t.avg_rating > 4  %}
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                {% elif t.avg_rating > 3  %}
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                {% elif t.avg_rating > 2  %}
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                {% elif t.avg_rating >  1  %}
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                {% else %}
                                <i class="fa-solid fa-star pt-1"></i>
                                {% endif %}
                            </div>
                            <!-- Tour info-->
                            <p class="card-text text-truncate pt-2">{{ t.snippet }}</p>
                            <div class="d-flex flex-row justify-content-start">
                                <button type="button" class="card-button btn btn-outline-secondary btn-sm mb-2" disabled>{{ t.province }}</button>
                                <button type="button" class="card-button btn btn-outline-secondary btn-sm mb-2 ms-1" disabled>{{ t.period }} hours</button>
                            </div>
                            
                            <div class="card_subtitle d-flex justify-content-start pt-2">
                                <h5 class="text-black">฿{{ t.price }} <h6 class="text-muted ps-1 pt-1"> /per group</h6></h5>
                            </div>
                            
                            <!-- <small class="card-subtitle">By {{ t.guide.first_name }} {{ t.guide.last_name }}</small><br> -->
                            <!-- <small class="card-subtitle text-muted">Last Updated: {{ t.date }}</small> -->
                        </div>
                    </div>
                </div>
                <!-- Tour guide-->
                <div class="card-footer border-top-0">
                    <div class="d-flex flex-row bd-highlight m-1 justify-content-start text-center">
                        <div class="align-items-center d-flex">
                            <a href="{% url 'tour:view_guide' t.guide.id %}" class="guide-profile stretched-link align-items-center d-flex" style="text-decoration: none; color: black; transform: rotate(0);">
                                <div class="avatar">
                                    <img src="{{ t.guide.guide.guide_image.url }}" title="" alt="">
                                </div>
                                <div class="g-name ps-2 pt-1" style="color: #20247b;">
                                    <h6>by {{ t.guide.first_name }} {{ t.guide.last_name }}</h6>
                                </div>
                                <p class="ps-2 pt-3">({{ t.review.count }} reviews)</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <hr><br>
    <!--    part popular   -->
    <h2 class="pt-3">Popular Tours</h2><br>
    
    <div class="row gx-4 gx-lg-4 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-start mt-3">
        {% for t in popular_tour %}
        <div class="col mb-5">
            <div class="card border-light h-100 shadow">
                <div class="card-img-body" style="transform: rotate(0);">
                    {% if t.img %}
                        <img class="card-img-top" src="{{ t.img.url}}" alt="..." />
                    {% endif %}
                    <!-- Tour details-->
                    <div class="card-body p-4">
                        <div class="text-start">
                            <!-- Tour name-->
                            <h5 class="fw-bolder text-truncate "><a href="{% url 'tour:view_tour' t.id %}" class="stretched-link" style="text-decoration: none; color: black;">{{ t.t_name }}</a></h5>
                            <!-- Tour reviews-->
                            <div class="d-flex justify-content-start small text-warning mb-2" style="font-size: 12px; letter-spacing: 2px;">
                                {% if t.avg_rating > 4  %}
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                {% elif t.avg_rating > 3  %}
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                {% elif t.avg_rating > 2  %}
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                {% elif t.avg_rating >  1  %}
                                <i class="fa-solid fa-star pt-1"></i>
                                <i class="fa-solid fa-star pt-1"></i>
                                {% else %}
                                <i class="fa-solid fa-star pt-1"></i>
                                {% endif %}
                            </div>
                            <!-- Tour info-->
                            <p class="card-text text-truncate pt-2">{{ t.snippet }}</p>
                            <div class="d-flex flex-row justify-content-start">
                                <button type="button" class="card-button btn btn-outline-secondary btn-sm mb-2" disabled>{{ t.province }}</button>
                                <button type="button" class="card-button btn btn-outline-secondary btn-sm mb-2 ms-1" disabled>{{ t.period }} hours</button>
                            </div>
                            
                            <div class="card_subtitle d-flex justify-content-start pt-2">
                                <h5 class="text-black">฿{{ t.price }} <h6 class="text-muted ps-1 pt-1"> /per group</h6></h5>
                            </div>
                            
                            <!-- <small class="card-subtitle">By {{ t.guide.first_name }} {{ t.guide.last_name }}</small><br> -->
                            <!-- <small class="card-subtitle text-muted">Last Updated: {{ t.date }}</small> -->
                        </div>
                    </div>
                </div>
                <!-- Tour guide-->
                <div class="card-footer border-top-0">
                    <div class="d-flex flex-row bd-highlight m-1 justify-content-start text-center">
                        <div class="align-items-center d-flex">
                            <a href="{% url 'tour:view_guide' t.guide.id %}" class="guide-profile stretched-link align-items-center d-flex" style="text-decoration: none; color: black; transform: rotate(0);">
                                <div class="avatar">
                                    <img src="{{ t.guide.guide.guide_image.url }}" title="" alt="">
                                </div>
                                <div class="g-name ps-2 pt-1" style="color: #20247b;">
                                    <h6>by {{ t.guide.first_name }} {{ t.guide.last_name }}</h6>
                                </div>
                                <p class="ps-2 pt-3">({{ t.review.count }} reviews)</p>
                            </a>
                            <!-- <div class="avatar">
                                <img src="{{ t.guide.guide.guide_image.url }}" title="" alt="">
                            </div>
                            <div class="g-name ps-2 pt-1">
                                <h6>{{ t.guide.first_name }} {{ t.guide.last_name }}</h6>
                            </div>
                            <p class="ps-2 pt-3">({{ t.review.count }} reviews)</p> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

</div>

{% endblock %}
